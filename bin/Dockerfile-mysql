FROM mysql:5.7

ARG user_uid
ARG user_gid
RUN usermod -u $user_uid mysql
RUN groupmod -g $user_gid mysql

RUN apt-get update && apt-get install -y procps

ENV TZ=Europe/Moscow
RUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime && echo $TZ > /etc/timezone

COPY ./entrypoints/mysql/custom-start.sh /usr/local/bin/custom-start.sh
RUN chmod +x /usr/local/bin/custom-start.sh

ENTRYPOINT ["custom-start.sh"]
CMD ["mysqld"]
